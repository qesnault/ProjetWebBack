{% extends 'base.html.twig' %}

{% block title %}Series
{% endblock %}

{% block body %}
	<h1>Series</h1>

	<table class="table">
		<tbody>
			<tr>
				<th>Id</th>
				<td>{{ series.id }}</td>
			</tr>
			<tr>
				<th>Title</th>
				<td>{{ series.title }}</td>
			</tr>
			<tr>
				<th>Plot</th>
				<td>{{ series.plot }}</td>
			</tr>
			<tr>
				<th>Lien vers la fiche IMDB</th>
				<td>
					<a href="https://www.imdb.com/title/{{ series.imdb }}">Cliquez ici !</a>
				</td>
			</tr>
			<tr>
				<th>Poster</th>
				<td>
					{% for image in images %}
						<img src="data:image/jpeg;base64,{{ image.poster }}">
					{% endfor %}
				</td>
			</tr>
			{% if series.director %}
				<tr>
					<th>Director</th>
					<td>{{ series.director }}</td>
				</tr>
			{% endif %}
			{% if series.actor %}
				<tr>
					<th>Actors :</th>
					<td>
						{% for act in series.actor %}
							{{ act.name }}
							|
						{% endfor %}
					</td>
				</tr>
			{% endif %}
			{% if series.country %}
				<tr>
					<th>Country :</th>
					<td>
						{% for count in series.country %}
							{{ count.name }}
						{% endfor %}
					</td>
				</tr>
			{% endif %}
			{% if series.genre %}
				<tr>
					<th>Genre :</th>
					<td>
						{% for count in series.genre %}
							{{ count.name }}
						{% endfor %}
					</td>
				</tr>
			{% endif %}
			<tr>
				<th>YoutubeTrailer</th>
				<td>
					<iframe width="560" height="315" src="https://www.youtube.com/embed/{{ series.youtubeTrailer }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
				</td>
			</tr>
			<tr>
				<th>Awards</th>
				<td>{{ series.awards }}</td>
			</tr>
			<tr>
				<th>YearStart :
				</th>
				<td>{{ series.yearStart }}</td>
			</tr>
			{% if series.yearEnd %}
				<tr>
					<th>YearEnd :
					</th>
					<td>{{ series.yearEnd }}</td>
				</tr>
			{% endif %}
			<tr>
				<th>Saisons :
				</th>
				<td>
					{% for i in 1..seasons|length %}
						<a href="{{path('index_episode_show',{'id': series.id, 'numSaison': i })}}">Saison
							{{ i }}</br>
					</a>
				{% endfor %}
			</tr>
			<tr>
				<th>User reviews :
				</th>
				<td>
					{% set sum = 0 %}
					{% for val in rating %}
						{% set sum = sum + val.value %}
					{% endfor %}
					{% if rating|length == 0 %}
						{% set sum = 'No user have review this serie yet' %}
						{{ sum }}
					{% else %}
						{% set sum = sum / rating|length %}
						Grade : {{ sum }}/5
					{% endif %}
				</td>
			</tr>
			<tr>
				<th>Add reviews :
				</th>
				<td></td>
			</tr>
		</tbody>
	</td>
</tr></tbody></td></tr></tbody></table><a href="{{ path('series_index') }}">Retour à la liste des séries</a><a href="{{ path('series_edit', {'id': series.id}) }}">edit</a>{{ include('series/_delete_form.html.twig') }}{% endblock %}
